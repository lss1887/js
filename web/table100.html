<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>预订单的表格</title>
    <script src="js/jquery-3.3.1.js"></script>
</head>
<body>
<table border="1" width="2000px" cellspacing="0" id="prepOrderTable" class="tableClass">
    <thead>
    <tr>
        <th style="width:100px">广告位</th>
        <th style="width:100px">CPM总数</th>
        <th style="width:100px">月份</th>
        <th style="width:70.9px">01</th>
        <th style="width:70.9px">02</th>
        <th style="width:70.9px">03</th>
        <th style="width:70.9px">04</th>
        <th style="width:70.9px">05</th>
        <th style="width:70.9px">06</th>
        <th style="width:70.9px">07</th>
        <th style="width:70.9px">08</th>
        <th style="width:70.9px">09</th>
        <th style="width:70.9px">10</th>
        <th style="width:70.9px">11</th>
        <th style="width:70.9px">12</th>
        <th style="width:70.9px">13</th>
        <th style="width:70.9px">14</th>
        <th style="width:70.9px">15</th>
        <th style="width:70.9px">16</th>
        <th style="width:70.9px">17</th>
        <th style="width:70.9px">18</th>
        <th style="width:70.9px">19</th>
        <th style="width:70.9px">20</th>
        <th style="width:70.9px">21</th>
        <th style="width:70.9px">22</th>
        <th style="width:70.9px">23</th>
        <th style="width:70.9px">24</th>
        <th style="width:70.9px">25</th>
        <th style="width:70.9px">26</th>
        <th style="width:70.9px">27</th>
        <th style="width:70.9px">28</th>
        <th style="width:70.9px">29</th>
        <th style="width:70.9px">30</th>
        <th style="width:70.9px">31</th>
    </tr>
    </thead>
    <tbody><tr><td rowspan="2" style="width:100px">新版锁屏详情页底部信息流</td><td rowspan="2" style="width:100px" id="totalAdCount">19</td><td style="width:100px">2020-05</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px"><input type="text" value="0" id="20200530" style="width:95%;height: 95%" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/D/g,'')}"></td><td style="width:70.9px"><input type="text" value="0" id="20200531" style="width:95%;height: 95%" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/D/g,'')}"></td></tr><tr><td style="width:100px">2020-06</td><td style="width:70.9px"><input type="text" value="0" id="20200601" style="width:95%;height: 95%" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/D/g,'')}"></td><td style="width:70.9px"><input type="text" value="0" id="20200602" style="width:95%;height: 95%" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/D/g,'')}"></td><td style="width:70.9px"><input type="text" value="11" id="20200603" style="width:95%;height: 95%" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/D/g,'')}"></td><td style="width:70.9px"><input type="text" value="8" id="20200604" style="width:95%;height: 95%" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/D/g,'')}"></td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td><td style="width:70.9px">-</td></tr></tbody>
</table>

<script>
    $("#prepOrderTable tbody  tr td input").change(function () {
        alert(1);
        var totalAdCount = 0;
        try{
            $("#prepOrderTable tbody tr td input").each(function () {
                var cpm = $(this).val();
                var reg = /^[0-9]*$/;
                if (!reg.test(cpm)) {
                    throw "CPM只能是数字!"
                }
                totalAdCount += cpm;
            })
            $("#totalAdCount").html(totalAdCount);
        }catch (e) {
            alert(e);
        }
    })
</script>

</body>
</html>